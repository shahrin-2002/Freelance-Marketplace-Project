{% extends 'core/base.html' %}
{% block content %}
<h2>{{ profile_user.username }}'s Profile</h2>

<p><strong>Location:</strong> {{ profile_user.location }}</p>
<p><strong>Bio:</strong> {{ profile_user.bio }}</p>

{% if profile_user.is_freelancer %}
    <p><strong>Skills:</strong>
        {% if profile_user.skills.all %}
            <ul>
                {% for skill in profile_user.skills.all %}
                    <li>{{ skill.name }}</li>
                {% endfor %}
            </ul>
        {% else %}
            <em>No skills listed.</em>
        {% endif %}
    </p>

    <h3>Reviews</h3>
    {% if avg_rating %}
        <p><strong>Average Rating:</strong> {{ avg_rating|floatformat:1 }}/5 ⭐</p>
    {% endif %}

    {% if reviews %}
        <ul>
            {% for review in reviews %}
                <li>
                    <strong>Rating:</strong> {{ review.rating }} / 5<br>
                    <strong>Comment:</strong> {{ review.comment|default:"(No comment)" }}<br>
                    <em>From {{ review.client.username }} on project "{{ review.proposal.project.title }}" ({{ review.created_at|date:"Y-m-d" }})</em>
                </li>
                <hr>
            {% endfor %}
        </ul>
    {% else %}
        <p><em>No reviews yet.</em></p>
    {% endif %}
{% endif %}

{% if request.user == profile_user %}
    <a href="{% url 'edit_profile' user.username %}" style="display: inline-block; background: purple; color: white; padding: 6px 12px; border-radius: 5px; text-decoration: none;">✏️ Edit Profile</a>
{% endif %}
{% endblock %}
