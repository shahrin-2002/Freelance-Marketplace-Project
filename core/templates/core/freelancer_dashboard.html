{% extends 'core/base.html' %}
{% block content %}

<h2>Welcome, {{ user.username }} (Freelancer)</h2>

<h3>Your Submitted Proposals</h3>
<ul>
    {% for proposal in proposals %}
        <li>
            <strong>Project:</strong> 
            <a href="{% url 'project_detail' proposal.project.id %}">
                {{ proposal.project.title }}
            </a><br>
            <strong>Proposed Price:</strong> ${{ proposal.proposed_price }}<br>
            <strong>Message:</strong> {{ proposal.message }}<br>
            <strong>Status:</strong> 
            {% if proposal.status == 'accepted' %}
                <span style="color: green;"><strong>Accepted</strong></span>
            {% elif proposal.status == 'rejected' %}
                <span style="color: red;"><strong>Rejected</strong></span>
            {% else %}
                <span style="color: gray;"><strong>Pending</strong></span>
            {% endif %}
            <br>
            <small>Submitted at {{ proposal.submitted_at }}</small>
        </li>
        <hr>
    {% empty %}
        <li>You haven't submitted any proposals yet.</li>
    {% endfor %}
</ul>

<hr>

<h3>Client Reviews</h3>
<ul>
    {% if reviews %}
        {% for review in reviews %}
            <li>
                <strong>Project:</strong> {{ review.proposal.project.title }}<br>
                <strong>Client:</strong> {{ review.proposal.project.client.username }}<br>
                <strong>Rating:</strong> {{ review.rating }} / 5<br>
                <strong>Comment:</strong> {{ review.comment }}<br>
                <small>Submitted on {{ review.created_at }}</small>
            </li>
            <hr>
        {% endfor %}
    {% else %}
        <li>No reviews received yet.</li>
    {% endif %}
</ul>

{% endblock %}